{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-10T16:13:28.176Z",
  "summary": "Diff implements the new PublicGraveResult type with alley/plotNumber and updates the public search UI and in-memory search indexing to use the extended shape. However, the backend method that returns public graves with these new fields is not visible in the truncated backend diff, and the admin-results “at a glance” summary/placeholder behavior is not fully verifiable due to truncation. Several unrelated content-management and prayer/footer/hero changes were introduced that are outside the BuildRequest.",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "Existing public API that returns public graves (used by the public search UI) returns the new location fields (alley + plot/grave number) for each result.",
      "reason": "backend/main.mo shows the updated public type (PublicGraveResult includes alley and plotNumber), but the diff excerpt is truncated before any public query method implementation; there is no visible evidence that the actual public-graves API now returns these fields.",
      "evidence": [
        "backend/main.mo (truncated)"
      ]
    },
    {
      "id": "REQ-4",
      "requirement": "Admin grave search results list includes a prominent summary showing location and status plus at least one deceased person name (or a placeholder when none) without scrolling into the detailed section.",
      "reason": "frontend/src/components/GraveResultsList.tsx excerpt clearly shows the public rendering changes, but the admin-mode rendering section is not included in the truncated content, so the prominent summary and zero-deceased placeholder cannot be confirmed from the provided diff text.",
      "evidence": [
        "frontend/src/components/GraveResultsList.tsx (truncated)"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Backend and frontend changes to site content models and UI (homepage hero/footer/site content), including a new PrayerForTheDeceased.memorialPrayer field and related public-page rendering.",
      "reason": "BuildRequest is limited to displaying grave location/status in search results; content management/prayer/footer/hero changes are not requested.",
      "evidence": [
        "backend/main.mo (adds PrayerForTheDeceased.memorialPrayer comment/field in truncated excerpt)",
        "frontend-file-summaries.txt (PublicPage.tsx memorial prayer block; AdminPanel content tab; Footer/Hero/Header content changes)"
      ]
    },
    {
      "description": "New/expanded React Query retry/backoff logic and multiple additional hooks unrelated to grave search (e.g., footer content, logo image updates).",
      "reason": "BuildRequest does not ask for retry logic changes or additional site content hooks; only search-result display/index updates were requested.",
      "evidence": [
        "frontend/src/hooks/useQueries.ts (truncated: adds retry/backoff utilities and extensive error handling not mentioned in requirements)",
        "frontend-file-summaries.txt (mentions added useGetFooterContent, useUpdateLogoImage, and other content-related hooks)"
      ]
    }
  ],
  "confidence": 0.62,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/GraveResultsList.tsx",
    "frontend/src/components/GraveSearch.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/utils/graveFullTextSearch.ts",
    "project_state.json"
  ]
}